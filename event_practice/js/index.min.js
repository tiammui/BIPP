console.log("it worked");var box=document.getElementsByClassName("box"),smallBox=document.getElementsByClassName("small-box"),fluidBox=document.getElementsByClassName("fluid-box"),box2=document.getElementById("box2"),drum=document.getElementById("drum");function runner(o){document.getElementById(o).addEventListener("mouseenter",function(e){console.log(e.offsetX,e.offsetY);var t={left:e.offsetX+"px",top:e.offsetY+"px"};updateCss(smallBox[0],t),document.getElementById(o).addEventListener("mousemove",runnerEvent)}),document.getElementById(o).addEventListener("mouseleave",function(){document.getElementById(o).removeEventListener("mousemove",runnerEvent)})}function creator(e){document.getElementById(e).addEventListener("mousedown",creatorEvent),document.getElementById(e).addEventListener("touchstart",creatorTouchEvent),document.getElementById(e).addEventListener("mouseup",function(){document.getElementById(e).removeEventListener("mousemove",mouseMoveEvent),fluidBox[0].removeEventListener("mousemove",fluidMouseEvent)}),document.getElementById(e).addEventListener("touchend",function(){document.getElementById(e).removeEventListener("touchmove",touchMoveEvent),fluidBox[0].removeEventListener("touchmove",fluidTouchEvent)})}function runnerEvent(e){var t=e.movementX,o=e.movementY,n=parseInt(smallBox[0].style.left)+t,r=parseInt(smallBox[0].style.top)+o;console.log(e.offsetX,e.offsetY);var s={left:n+"px",top:r+"px"};updateCss(smallBox[0],s)}var creatorObj={x1:0,x2:0,y1:0,y2:0},pinPoint={x:0,y:0};function creatorEvent(e){if(creatorObj.x1=pinPoint.x=e.pageX-getOffset(box2)[0],creatorObj.y1=pinPoint.y=e.pageY-getOffset(box2)[1],!e.target.classList.contains("box"))return fluidBox[0].addEventListener("mousemove",fluidMouseEvent),console.log("fluid");box2.addEventListener("mousemove",mouseMoveEvent)}function creatorTouchEvent(e){var t=e.changedTouches[0];if(creatorObj.x1=pinPoint.x=t.pageX-getOffset(box2)[0],creatorObj.y1=pinPoint.y=t.pageY-getOffset(box2)[1],!e.target.classList.contains("box"))return fluidBox[0].addEventListener("touchmove",fluidTouchEvent),console.log("fluid");box2.addEventListener("touchmove",touchMoveEvent)}function mouseMoveEvent(e){creatorObj.x2=e.pageX-getOffset(box2)[0],creatorObj.y2=e.pageY-getOffset(box2)[1];var t=cordCorrection(creatorObj);t.x1<0&&(t.x1=0),t.y1<0&&(t.y1=0),t.x2>getWidth(box2)&&(t.x2=getWidth(box2)),t.y2>getHeight(box2)&&(t.y2=getHeight(box2));var o={left:t.x1+"px",top:t.y1+"px",width:t.x2-t.x1+"px",height:t.y2-t.y1+"px"};updateCss(fluidBox[0],o)}function touchMoveEvent(e){var t=e.changedTouches[0];creatorObj.x2=t.pageX-getOffset(box2)[0],creatorObj.y2=t.pageY-getOffset(box2)[1];var o=cordCorrection(creatorObj);o.x1<0&&(o.x1=0),o.y1<0&&(o.y1=0),o.x2>getWidth(box2)&&(o.x2=getWidth(box2)),o.y2>getHeight(box2)&&(o.y2=getHeight(box2));var n={left:o.x1+"px",top:o.y1+"px",width:o.x2-o.x1+"px",height:o.y2-o.y1+"px"};updateCss(fluidBox[0],n)}function fluidMouseEvent(e){var t=e.movementX,o=e.movementY,n=parseInt(fluidBox[0].style.left)+t,r=parseInt(fluidBox[0].style.top)+o,s=getWidth(box2)-getWidth(fluidBox[0]),i=getHeight(box2)-getHeight(fluidBox[0]);n<0&&(n=0),r<0&&(r=0),s<n&&(n=s),i<r&&(r=i);var u={left:n+"px",top:r+"px"};updateCss(fluidBox[0],u)}function fluidTouchEvent(e){var t=e.changedTouches[0],o=t.pageX-getOffset(box2)[0],n=t.pageY-getOffset(box2)[1],r=o-pinPoint.x,s=n-pinPoint.y;pinPoint.x=o,pinPoint.y=n;var i=parseFloat(fluidBox[0].style.left)+r,u=parseFloat(fluidBox[0].style.top)+s,d=getWidth(box2)-getWidth(fluidBox[0]),x=getHeight(box2)-getHeight(fluidBox[0]);i<0&&(i=0),u<0&&(u=0),d<i&&(i=d),x<u&&(u=x);var f={left:i+"px",top:u+"px"};updateCss(fluidBox[0],f)}function getWidth(e){return e.offsetWidth}function getHeight(e){return e.offsetHeight}function cordCorrection(e){var t=e.x1,o=e.x2,n=e.y1,r=e.y2;return o<t&&(t=e.x2,o=e.x1),r<n&&(n=e.y2,r=e.y1),{x1:t,y1:n,x2:o,y2:r}}function getOffset(e){return[e.offsetLeft,e.offsetTop]}function updateCss(e,t){Object.assign(e.style,t)}function scroller(){drum.addEventListener("scroll",scrollerEvent)}function scrollerEvent(e){console.log(e)}runner("box1"),creator("box2"),scroller();